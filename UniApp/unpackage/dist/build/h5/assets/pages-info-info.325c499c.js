import{a2 as e,W as t,r as a,a1 as s,ab as l,s as i,o as r,c as o,a as d,w as n,b as c,v as u,F as h,i as p,q as f,d as m,t as g,e as y,f as _,h as x,g as b,j as w,k}from"./index-0c21f32c.js";import{_ as S}from"./uni-popup-dialog.7c903322.js";import{_ as R,r as T,a as C}from"./uni-app.es.52003e05.js";import{_ as q}from"./uni-popup.67926e3d.js";import{_ as j}from"./uni-load-more.25e4b68d.js";const L=R({data:()=>({name:"",school:"",qq:"",id:"",username:"",imageUrl:"",updated_at:"",passed:-1,imageLoading:!0,loading:!1,headerStyle:{height:"100rpx",width:"100%",borderBottomLeftRadius:"20rpx",borderBottomRightRadius:"20rpx",borderTopLeftRadius:"0",borderTopRightRadius:"0",top:"0",left:"0",background:"rgba(0, 95, 255, 0.8)"}}),methods:{handleBack(){e()},handleMagic(){this.headerStyle.height="100rpx"===this.headerStyle.height?"90rpx":"100rpx",this.headerStyle.width="100%"===this.headerStyle.width?"95%":"100%",this.headerStyle.borderTopLeftRadius="0"===this.headerStyle.borderTopLeftRadius?"30rpx":"0",this.headerStyle.borderTopRightRadius="0"===this.headerStyle.borderTopRightRadius?"30rpx":"0",this.headerStyle.borderBottomLeftRadius="20rpx"===this.headerStyle.borderBottomLeftRadius?"30rpx":"20rpx",this.headerStyle.borderBottomRightRadius="20rpx"===this.headerStyle.borderBottomRightRadius?"30rpx":"20rpx",this.headerStyle.top="0"===this.headerStyle.top?"10rpx":"0",this.headerStyle.left="0"===this.headerStyle.left?"calc(0.025 * 100vw)":"0"},_previewImage(e){var a=[];a.push(e),t({urls:a,current:a[0]})},handleGetUserImage(){a({url:`https://apis.johnsonsii.cn/apis/getuserimage/?username=${this.username}`,method:"GET",responseType:"arraybuffer",success:e=>{const t=s(e.data);this.imageUrl="data:image/jpeg;base64,"+t,this.imageLoading=!1}})},handleGetUserInfo(){a({url:`https://apis.johnsonsii.cn/apis/getuserinfo/?username=${this.username}`,method:"GET",success:e=>{this.id=e.data.id,this.username=e.data.username,this.name=e.data.name,this.school=e.data.school,this.qq=e.data.qq,this.updated_at=this.formatDate(e.data.updated_at),this.passed=e.data.passed}})},formatDate(e){var t=new Date(e);return t.getFullYear()+"-"+("0"+(t.getMonth()+1)).slice(-2)+"-"+("0"+t.getDate()).slice(-2)+" "+("0"+t.getHours()).slice(-2)+":"+("0"+t.getMinutes()).slice(-2)+":"+("0"+t.getSeconds()).slice(-2)},copyToClipboard(e){l({data:e,success:function(){i({title:"复制成功",icon:"success"})},fail:function(){i({title:"复制失败",icon:"success"})}})},handlePass(){if(1===this.passed)i({title:"已通过",icon:"success"});else{if(-1===this.passed)return void i({title:"请稍后……",icon:"none"});this.$refs.alertDialog.open()}},dialogConfirm(){this.loading=!0;const e=this;a({url:`https://apis.johnsonsii.cn/apis/setuserpassed?username=${this.username}&passed=1`,method:"GET",success(t){e.loading=!1,i({title:"已通过",icon:"success"}),e.handleGetUserInfo()}})}},onLoad(e){this.username=e.username,this.handleGetUserInfo(),this.handleGetUserImage()}},[["render",function(e,t,a,s,l,i){const R=T(x("uni-popup-dialog"),S),L=T(x("uni-popup"),q),z=T(x("uni-load-more"),j),U=p,v=T(x("uni-icons"),C),B=b,G=w,I=k;return r(),o(h,null,[d(L,{ref:"alertDialog",type:"dialog"},{default:n((()=>[d(R,{type:"info",cancelText:"关闭",confirmText:"同意",title:"请确认",content:"您是否同意通过该用户的审核。",onConfirm:i.dialogConfirm},null,8,["onConfirm"])])),_:1},512),c(d(U,{class:"mask center"},{default:n((()=>[d(z,{status:"loading",iconType:"circle",color:"#444",iconSize:50,showText:!1})])),_:1},512),[[u,l.loading]]),d(U,{class:"container"},{default:n((()=>[d(U,{class:"header flexr fab sac whitefont smallshadow",style:f(l.headerStyle)},{default:n((()=>[d(U,{class:"center",style:{width:"100rpx"},onClick:i.handleBack},{default:n((()=>[d(v,{type:"undo-filled",color:"white",size:"26"})])),_:1},8,["onClick"]),d(U,{class:"f1 center"},{default:n((()=>[m("审核管理")])),_:1}),d(U,{class:"center",style:{width:"100rpx"},onClick:i.handleMagic},{default:n((()=>[d(v,{type:"smallcircle",color:"white",size:"26"})])),_:1},8,["onClick"])])),_:1},8,["style"]),d(U,{class:"fake-header"}),d(U,{class:"content colc"},{default:n((()=>[d(U,{class:"custom-title"},{default:n((()=>[m("身份卡")])),_:1}),d(U,{class:"infocard col-left-top"},{default:n((()=>[d(U,{class:"row-left",style:{height:"25%","margin-top":"30rpx"}},{default:n((()=>[d(v,{type:"contact",size:"80"}),d(U,{class:"col-left-around",style:{height:"100%"}},{default:n((()=>[d(B,{style:{"font-size":"22rpx"}},{default:n((()=>[m("联系电话："+g(l.username),1)])),_:1}),d(U,{class:"row-left"},{default:n((()=>[d(B,{style:{"font-size":"38rpx","font-weight":"600"}},{default:n((()=>[m(g(l.name),1)])),_:1}),d(G,{size:"mini",style:{"margin-left":"30rpx"},onClick:t[0]||(t[0]=e=>i.copyToClipboard(l.name))},{default:n((()=>[m("复制")])),_:1})])),_:1})])),_:1})])),_:1}),d(U,{style:{width:"95%",border:"0.5px solid gray",height:"0px",margin:"40rpx auto"}}),d(U,{class:"row-left",style:{margin:"10rpx 20rpx"}},{default:n((()=>[d(B,null,{default:n((()=>[m("初中毕业学校：")])),_:1}),d(B,null,{default:n((()=>[m(g(l.school),1)])),_:1})])),_:1}),d(U,{class:"row-left",style:{margin:"10rpx 20rpx"}},{default:n((()=>[d(B,null,{default:n((()=>[m("申请QQ号：")])),_:1}),d(U,{class:"row-left"},{default:n((()=>[d(B,{style:{"font-size":"30rpx","font-weight":"600",color:"#3d71ff"}},{default:n((()=>[m(g(l.qq),1)])),_:1}),d(G,{size:"mini",style:{"margin-left":"30rpx"},onClick:t[1]||(t[1]=e=>i.copyToClipboard(l.qq))},{default:n((()=>[m("复制")])),_:1})])),_:1})])),_:1}),d(U,{class:"row-left",style:{margin:"10rpx 20rpx"}},{default:n((()=>[-1===l.passed||0===l.passed?(r(),y(B,{key:0},{default:n((()=>[m("申请时间：")])),_:1})):_("",!0),1===l.passed?(r(),y(B,{key:1},{default:n((()=>[m("审核时间：")])),_:1})):_("",!0),d(B,null,{default:n((()=>[m(g(l.updated_at),1)])),_:1})])),_:1}),d(U,{class:"row-left",style:{margin:"10rpx 20rpx"}},{default:n((()=>[d(B,null,{default:n((()=>[m("审核状态：")])),_:1}),0===l.passed?(r(),y(B,{key:0,style:{color:"#dd001b"}},{default:n((()=>[m("未通过")])),_:1})):_("",!0),1===l.passed?(r(),y(B,{key:1,style:{color:"#00c777"}},{default:n((()=>[m("已通过")])),_:1})):_("",!0)])),_:1})])),_:1}),d(U,{class:"custom-title"},{default:n((()=>[m("录取通知书")])),_:1}),l.imageLoading?(r(),y(B,{key:0},{default:n((()=>[m("请稍后……")])),_:1})):_("",!0),d(I,{src:l.imageUrl,onClick:t[2]||(t[2]=e=>i._previewImage(l.imageUrl)),mode:"widthFix"},null,8,["src"]),d(G,{class:"pass-button",onClick:i.handlePass},{default:n((()=>[m("通过")])),_:1},8,["onClick"])])),_:1})])),_:1})],64)}],["__scopeId","data-v-98fff28c"]]);export{L as default};
